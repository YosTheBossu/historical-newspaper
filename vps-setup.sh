#!/bin/bash
set -e

echo "============================================"
echo "  העיתון של ההיסטוריה - התקנה אוטומטית"
echo "============================================"
echo ""

APP_DIR="/opt/historical-newspaper"
APP_PORT="${APP_PORT:-8080}"

# Check if Docker is installed
if ! command -v docker >/dev/null 2>&1; then
  echo "[1/5] Installing Docker..."
  apt-get update -y -qq
  apt-get install -y -qq ca-certificates curl gnupg
  install -m 0755 -d /etc/apt/keyrings
  curl -fsSL https://download.docker.com/linux/ubuntu/gpg | gpg --dearmor -o /etc/apt/keyrings/docker.gpg 2>/dev/null
  chmod a+r /etc/apt/keyrings/docker.gpg
  . /etc/os-release
  echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu ${VERSION_CODENAME} stable" | tee /etc/apt/sources.list.d/docker.list >/dev/null
  apt-get update -y -qq
  apt-get install -y -qq docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
  systemctl enable --now docker
  echo "  Docker installed!"
else
  echo "[1/5] Docker already installed"
fi

echo "[2/5] Creating project directory..."
mkdir -p "$APP_DIR"
cd "$APP_DIR"

echo "[3/5] Extracting project files..."
echo "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" | base64 -d | tar xzf -
chmod +x docker-entrypoint.sh

echo "[4/5] Building and starting container..."
if docker compose version >/dev/null 2>&1; then
  COMPOSE="docker compose"
elif command -v docker-compose >/dev/null 2>&1; then
  COMPOSE="docker-compose"
else
  echo "ERROR: docker compose not found"
  exit 1
fi

export APP_PORT
$COMPOSE build
$COMPOSE up -d

echo "[5/5] Checking status..."
sleep 3
$COMPOSE ps

echo ""
echo "============================================"
echo "  DONE! The site is live."
echo "  Open: http://$(hostname -I | awk '{print $1}'):$APP_PORT"
echo "============================================"
echo ""
echo "Useful commands:"
echo "  cd $APP_DIR && docker compose logs -f    # View logs"
echo "  cd $APP_DIR && docker compose restart     # Restart"
echo "  cd $APP_DIR && docker compose down        # Stop"
